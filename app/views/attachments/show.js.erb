var parent = "<%= escape_javascript(@attachment.id.to_s) %>";

$(".c[data-id="+parent+"]").find("p.auth_s3_url").remove();
$(".c[data-id="+parent+"]").append("<%= escape_javascript(render :partial => 'attachment_url', :locals => {:attachment => @attachment} ) %>");

$(".modal").remove();
$('#flash').remove();
$("header#banner").after('<div id="flash"><div id="notice"><%= escape_javascript(flash.discard(:notice)) %></div></div>');

var flashMargin = ($(window).width() - $("#flash").width()) / 2; 
$("#flash").css({'left' : flashMargin+"px"});
$("#flash").delay(5000).fadeOut('slow', function() {$(this).remove();});